version: 2.1
orbs:
  node: circleci/node@4.2.0
jobs:
  build-and-deploy:
    executor:
      name: node/default
    steps:
      - run:
          command: git clone https://github.com/obmarg/libsysconfcpus
      - run:
          command: cd libsysconfcpus && ./configure && make && sudo make install 
      - run:
          command: cat /proc/cpuinfo
      - run:
          command: sysconfcpus -n 2 cat /proc/cpuinfo
      # - checkout
      # - node/install-packages
      # - restore_cache:
      #     keys:
      #       - purescript-compile-deps-{{ checksum "spago.dhall" }}-{{ checksum "packages.dhall" }}
      # - run:
      #     command: npm run build
      # - save_cache:
      #     key: purescript-compile-deps-{{ checksum "spago.dhall" }}-{{ checksum "packages.dhall" }}
      #     paths:
      #       - .spago
      #       - output
      # - run: 
      #     command: npm run bundle
      # - run:
      #     command: npm run deploy
workflows:
  build:
    jobs:
      - build-and-deploy
